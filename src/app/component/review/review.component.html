<!-- Review Form Section -->
 

<div class="review-form">
  <h2>Post a Review</h2>

  <form (ngSubmit)="submitReview()">
    <div class="form-group">
      <label for="reviewType">Review Type</label>
      <select id="reviewType" [(ngModel)]="reviewType" name="reviewType" class="form-control">
        <option value="restaurant">Restaurant</option>
        <option value="menu">Menu</option>
      </select>
    </div>

    <div *ngIf="reviewType === 'restaurant'" class="form-group">
      <label for="restaurant">Select Restaurant</label>
      <select id="restaurant" [(ngModel)]="selectedRestaurantId" name="restaurant" class="form-control">
        <option *ngFor="let restaurant of restaurants" [value]="restaurant.restaurantId">
          {{ restaurant.restaurantName }}
        </option>
      </select>
    </div>

    <div *ngIf="reviewType === 'menu'" class="form-group">
      
      <label for="menu">Select Menu Item</label>
      <select id="menu" [(ngModel)]="selectedMenuId" name="menu" class="form-control">
        <option *ngFor="let menu of menus" [value]="menu.menuId">
          {{ menu.itemName }}
        </option>
      </select>
      <label for="restaurant">Select Restaurant</label>
      <select id="restaurant" [(ngModel)]="selectedRestaurantId" name="restaurant" class="form-control">
        <option *ngFor="let restaurant of restaurants" [value]="restaurant.restaurantId">
          {{ restaurant.restaurantName }}
        </option>
      </select>
    </div>

    <div class="form-group">
      <label for="rating">Rating</label>
      <input id="rating" type="number" min="1" max="5" [(ngModel)]="review.rating" name="rating" class="form-control"
        required>
    </div>

    <div class="form-group">
      <label>Rating Stars</label>
      <div class="star-rating">
        <i *ngFor="let star of stars; let i = index" class="fa" [class.fa-star]="i < review.rating"
          [class.fa-star-o]="i >= review.rating" (click)="setRating(i + 1)">
        </i>
      </div>
    </div>

    <div class="form-group">
      <label for="comment">Comment</label>
      <textarea id="comment" [(ngModel)]="review.comment" name="comment" class="form-control" rows="4"
        required></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Submit Review</button>
  </form>
</div>
<div class="container mt-4">
  <!-- Toggle Button for Review Type -->
  <div class="d-flex justify-content-center mb-4">
    <div class="btn-group" role="group">
      <button type="button" class="btn btn-primary" [class.active]="reviewType === 'restaurant'"
        (click)="reviewType = 'restaurant'; loadRestaurantReviews()">
        Restaurant Reviews
      </button>
      <button type="button" class="btn btn-primary" [class.active]="reviewType === 'menu'"
        (click)="reviewType = 'menu'; loadMenuReviews()">
        Menu Reviews
      </button>
    </div>
  </div>

  <!-- Selection of Restaurant or Menu -->
  <div *ngIf="reviewType === 'restaurant'" class="mb-3">
    <label for="restaurantSelect" class="form-label">Select Restaurant:</label>
    <select id="restaurantSelect" class="form-select" [(ngModel)]="selectedRestaurantId"
      (change)="loadRestaurantReviews()">
      <option *ngFor="let restaurant of restaurants" [value]="restaurant.restaurantId">{{ restaurant.restaurantName }}
      </option>
    </select>
  </div>

  <div *ngIf="reviewType === 'menu'" class="mb-3">
    <label for="menuSelect" class="form-label">Select Menu:</label>
    <select id="menuSelect" class="form-select" [(ngModel)]="selectedMenuId" (change)="loadMenuReviews()">
      <option *ngFor="let menu of menus" [value]="menu.menuId">{{ menu.itemName }}</option>
    </select>
  </div>
</div>
<div *ngFor="let review of reviews" class="card mb-3">
  <div *ngFor="let restaurant of restaurants">
    <div class="card-body">
      <h5 class="card-title">
        <p class="card-text"><strong>Type:</strong> {{ review.reviewType }}</p>
        <p class="card-text"><strong>Restaurant Name:</strong> {{ restaurant.restaurantName }}</p>
        <p class="card-text"><strong>Restaurant Address:</strong> {{ restaurant.restaurantAddress }}</p>
        <p class="card-text"><strong>Menu Name :</strong> {{ review.menuName }}</p>
        <p class="card-text"><strong>Comment </strong>{{ review.comment }}</p>
        <p class="card-text"><strong>Rating:</strong> {{ review.rating }}</p>
        <div class="star-rating">
          <i *ngFor="let star of stars; let i = index" class="fa" [class.fa-star]="i < review.rating"
            [class.fa-star-o]="i >= review.rating" (click)="setRating(i + 1)">
          </i>
        </div>
        <p class="card-text"><small class="text-muted">Reviewed on {{ review.reviewDate | date }}</small></p>
      </h5>
    </div>
  </div>
</div>