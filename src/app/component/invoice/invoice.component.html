<div class="container mt-5">
  <!-- Invoice Card -->
  <div class="card mb-4">
    <div class="card-header invoice-header text-center">
      <h1 class="display-4">Invoice</h1>
      <p class="lead">Thank you for your order!</p>
    </div>
    <div class="card-body">
      <!-- Invoice Details -->
      <div class="row mb-4">
        <div class="col-md-6">
          <p><strong>Invoice ID:</strong> {{ invoiceDetails.id }}</p>
          <p><strong>Invoice Date:</strong> {{ invoiceDetails.invoiceDate | date:'short' }}</p>
        </div>
        <div class="col-md-6 text-md-end">
          <p><strong>Payment ID:</strong> {{ paymentId }}</p>
          <p><strong>Order ID:</strong> {{ orderId }}</p>
        </div>
      </div>
      
      <!-- Order Details -->
      <div class="row mb-4">
        <div class="col-md-6">
          <p><strong>Order ID:</strong> {{ invoiceDetails.order.id }}</p>
          <p><strong>Order Date and Time:</strong> {{ invoiceDetails.order.dateAndTime | date:'short' }}</p>
        </div>
        <div class="col-md-6 text-md-end">
          <p><strong>Order Status:</strong> {{ invoiceDetails.order.orderStatus }}</p>
        </div>
        <div class="col-md-12">
          <p><strong>Grand Total Price:</strong> {{ invoiceDetails.order.grandTotalPrice | currency:'INR' }}</p>
          <p><strong>Delivery Charge:</strong> {{ invoiceDetails.order.deliveryCharge | currency:'INR' }}</p>
          <p><strong>GST:</strong> {{ invoiceDetails.order.gst | currency:'INR' }}</p>
          <p><strong>Platform Charge:</strong> {{ invoiceDetails.order.platformCharge | currency:'INR' }}</p>
          <p><strong>Total Amount:</strong> {{ invoiceDetails.order.totalAmount | currency:'INR' }}</p>
        </div>
      </div>

      <!-- Restaurant Details -->
      <div class="row mb-4">
        <div class="col-md-6">
          <p><strong>Restaurant Name:</strong> {{ invoiceDetails.order.restaurant.restaurantName }}</p>
          <p><strong>Address:</strong> {{ invoiceDetails.order.restaurant.restaurantAddress }}</p>
          <p><strong>Contact Info:</strong> {{ invoiceDetails.order.restaurant.restaurantContactInfo }}</p>
        </div>
      </div>

      <!-- User Details -->
      <div class="row mb-4">
        <div class="col-md-6">
          <p><strong>User Name:</strong> {{ invoiceDetails.order.user.name }}</p>
          <p><strong>Email:</strong> {{ invoiceDetails.order.user.email }}</p>
          <p><strong>Mobile No:</strong> {{ invoiceDetails.order.user.mobileNo }}</p>
        </div>
      </div>

      <!-- Order Items -->
      <div class="row mb-4">
        <div class="col-12">
          <h5 class="mb-3">Order Items</h5>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">Menu Item</th>
                <th scope="col">Quantity</th>
                <th scope="col">Category</th>
                <th scope="col">Price</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of invoiceDetails.order.orderItems">
                <td>{{ item.menu.itemName }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.menu.category }}</td>
                <td>{{ item.menu.price | currency:'INR' }}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Razorpay Response -->
      <div *ngIf="paymentId" class="row mb-4">
        <div class="col-12">
          <div class="card">
            <div class="card-header bg-primary text-white">
              <h5 class="card-title">Razorpay Response</h5>
            </div>
            <div class="card-body">
              <p><strong>Payment ID:</strong> {{ paymentId }}</p>
              <p><strong>Order ID:</strong> {{ orderId }}</p>
              <p><strong>Signature:</strong> {{ signature }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="card-footer invoice-footer text-center">
      <button class="btn btn-primary" (click)="printInvoice()">Print Invoice</button>
      <button class="btn btn-secondary" (click)="closeInvoice()">Close</button>
    </div>
  </div>
</div>
